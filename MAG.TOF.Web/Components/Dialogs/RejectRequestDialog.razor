@using MudBlazor

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6" Class="mb-4">Reject Request #@RequestId</MudText>
        <MudText Typo="Typo.body2" Class="mb-3">
            Please provide a reason for rejecting the request from <strong>@UserName</strong>:
        </MudText>
        <MudTextField @bind-Value="RejectionComment"
                      Label="Rejection Reason"
                      Variant="Variant.Outlined"
                      Lines="4"
                      Required="true"
                      RequiredError="A rejection reason is required"
                      Placeholder="Enter the reason for rejection..."
                      MaxLength="500"
                      Counter="500" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" Variant="Variant.Text">Cancel</MudButton>
        <MudButton OnClick="Submit"
                   Color="Color.Error"
                   Variant="Variant.Filled"
                   Disabled="@(string.IsNullOrWhiteSpace(RejectionComment))">
            Reject Request
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    public IMudDialogInstance MudDialog { get; set; } = null!;

    [Parameter]
    public int RequestId { get; set; }

    [Parameter]
    public string UserName { get; set; } = string.Empty;

    private string RejectionComment { get; set; } = string.Empty;

    private void Cancel() => MudDialog.Cancel();

    private void Submit()
    {
        if (!string.IsNullOrWhiteSpace(RejectionComment))
        {
            MudDialog.Close(DialogResult.Ok(RejectionComment));
        }
    }
}